\section{Character and String types}

A character type is a data type used to store a single textual symbol, such as a
letter, digit, or punctuation mark. It is commonly used in text processing and
input/output operations. Multiple character values can be combined to form
strings, which are used to represent longer sequences of text.

\subsection{Character literal}
\label{sec:chap2_char_lit}

A character literal consists of a character symbol enclosed in single quotes
(\token{'}). There are three character types: \token{c8}, \token{c16}, and
\token{c32}, which are used to store values in UTF-8, UTF-16, and UTF-32
encoding, respectively. The encoding determines the number of bits used to
represent a character symbol. As we will see in a later subsection, when working
with string values, the choice of encoding plays a major role in how text is
stored in memory.

\begin{lstlisting}[style=coloredverbatim, label=lst:(chap2):char_literal, caption=Example of character literals, escapechar=@]
let x = 'A';
let y = '@\ensuremath{\texttt{\Omega{}}}@'c16;
let z = '@\emoji{slightly-smiling-face}@'c32;
\end{lstlisting}


In listing~\ref{lst:(chap2):char_literal}, three character literals are defined
and stored in the variables \token{x}, \token{y}, and \token{z}. The suffixes
\token{c16} and \token{c32} indicate that the literals \token{'Œ©'c16} and
\token{'üôÇ'c32} are encoded using the types \token{c16} and \token{c32},
respectively. When no suffix is specified, as in \token{'A'}, the default UTF-8
encoding is used.

\bigskip
\noindent{}The value \token{'üôÇ'} requires exactly 32 bits for encoding and
therefore cannot be stored in a \token{c8} or \token{c16} variable. The compiler
will issue an error for the following source code.

\begin{lstlisting}[style=coloredverbatim, label=lst:(chap2):char_encode_error, escapechar=@]
let x = '@\hb{\emoji{slightly-smiling-face}}@'; // Error : malformed literal, number of c8 is 4 
\end{lstlisting}%

ASCII encoding defines a set of special characters, called escape characters,
which represent formatting actions such as line breaks or tabulation. These
escape characters are always introduced by a backslash. The table below lists
the escape characters available in Ymir. All escape characters (except Unicode
values, which depend on the specific code point being encoded) are representable
as UTF‚Äë8 characters.

\begin{center}
  \begin{tabular}{ll}
    Value & Content\\[0pt]
    \hline
    \texttt{\textbackslash{}a} & Alert beep, (Bell)\\[0pt]
    \texttt{\textbackslash{}b} & Backspace\\[0pt]
    \texttt{\textbackslash{}f} & Page break\\[0pt]
    \texttt{\textbackslash{}n} & New line\\[0pt]
    \texttt{\textbackslash{}r} & Carriage return\\[0pt]
    \texttt{\textbackslash{}t} & Horizontal tab\\[0pt]
    \texttt{\textbackslash{}v} & Vertical tab\\[0pt]
    \texttt{\textbackslash{}\textbackslash{}} & Backslash\\[0pt]
    \texttt{\textbackslash{}'} & Apostrophe\\[0pt]
    \texttt{\textbackslash{}"} & Double quotation mark\\[0pt]
    \texttt{\textbackslash{}u\{code\}} & Unicode\\[0pt]
  \end{tabular}
  \captionof{table}{\label{tab:(chap2):escape_chars} Escape characters}
\end{center}

Table~\ref{tab:(chap2):escape_chars} presents the escape sequence
\texttt{\textbackslash{}u\{code\}}. This escape sequence is used to write
Unicode literals by specifying their integer code point rather than the encoded
character itself. For example, the literal \token{'üôÇ'} corresponds to the value
\token{0x1F642}, and can therefore be written as \token{'\u\{0x1F642\}'c32}.

\subsection{String type}

A string is a data type designed to hold text. It represents a sequence of
characters arranged in memory according to a specific encoding system. Unlike
single character values, strings can contain any Unicode symbol, and the memory
required depends on the characters stored.

\subsection{String literal}

A string literal is a sequence of character symbols enclosed in double quotes
(\token{"}). A string type can be understood as an array (or slice) of character
elements, described using bracket tokens. For example, \token{\[c8\]} represents
a string of arbitrary length encoded in UTF‚Äë8, and \token{\[c16 ; 5\]}
represents a string of exactly 5 characters encoded in UTF‚Äë16. This notation
makes explicit both the encoding system and the size constraints of the string.
Array and slice types will be introduced in detail in the next chapter on
Composed Types. For now, it is sufficient to understand that both arrays and
slices store their values sequentially in memory, one after the other.
\bigskip

\noindent{}As with character literals, a suffix may be appended to a string literal to
specify the encoding style. The available suffixes are \token{s8}, \token{s16},
and \token{s32}. When no suffix is provided, the default encoding system is
UTF‚Äë8.

\begin{lstlisting}[style=coloredverbatim, label=lst:(chap2):string_literal, caption=Example of string literals, escapechar=@]
let greetings = "Hello World!";
let utf8_unicode = "@\texttt{\color{black!30!applegreen} ÏïàÎÖïÌïòÏÑ∏Ïöî ÏÑ∏Í≥Ñ}@";
let utf32_unicode = "@\texttt{\color{black!30!applegreen} „Åì„Çì„Å´„Å°„ÅØ ‰∏ñÁïå}@"s32;
\end{lstlisting}

\subsection{A Small Word on Encoding}

As discussed in Section~\ref{sec:chap2_char_lit}, character values may require
up to four bytes of memory depending on the symbol they represent. Basic
characters defined in the ASCII table are encoded using only 8 bits, and can
therefore be stored in \token{c8} type values or within strings of type
\token{[c8]} without the need for complex encoding schemes. For example, in
Listing~\ref{lst:(chap2):string_literal}, the value assigned to the variable
\token{greetings} consists solely of ASCII characters. These characters are
placed sequentially in memory, beginning with the letter \token{'H'}, which
corresponds to the value $72$ in the ASCII table.

\input{chapters/chapter2/figures/hello_string_figure}
