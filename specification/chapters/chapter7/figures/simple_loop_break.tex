\begin{figure}[h]
  \centering
  \begin{adjustbox}{max size=0.5\linewidth}

    \begin{tikzpicture}

      \draw[line width=0.03pt] (1, 2) rectangle (3, 2.6);

      \draw[line width=0.03pt] (0, 0.5) rectangle (4, 1.5);
      \draw[line width=0.03pt] (0, -1.5) rectangle (4, -0.5);
      \draw[line width=0.03pt] (-3.5, -3.5) rectangle (0, -2.5);
      \draw[line width=0.03pt] (0.8, -3.5) rectangle (4.5, -2.5);

      \draw[line width=0.03pt] (0, -5.5) rectangle (4, -4);
      \draw[line width=0.03pt] (1, -6.5) rectangle (3, -5.9);

      \draw[Box] (2, 2.3) -- (2, 2.3) node[anchor=center]{\textit{foo entry}};
      \draw[Box] (2, -6.2) -- (2, -6.2) node[anchor=center]{\textit{foo exit}};

      \draw[Box] (2, 1) -- (2, 1) node[anchor=center]{count = 0};
      \draw[Box] (2, -1) -- (2, -1) node[anchor=center]{YI\_1 = (count == 10)};
      \draw[Box] (-1.75, -3) -- (-1.75, -3) node[anchor=center]{YI\_2 = count + 1};
      \draw[Box] (2.65, -3) -- (2.65, -3) node[anchor=center]{count = count + 1};

      \draw[Box] (2, -4.4) -- (2, -4.4) node[anchor=center]{x = YI\_2};
      \draw[Box] (2, -5.1) -- (2, -5.1) node[anchor=center]{assert (x == 11)};

      \draw[thick,-Stealth,shorten >=1pt] (1, -1.5)   to [out=-90,in=90]  node[below right, yshift=5mm]  {\small YI\_1} (-1.75, -2.5);
      \draw[thick,-Stealth,shorten >=1pt] (2, -1.5)   to [out=-90,in=90]  node[below right, yshift=5mm]  {\small !YI\_1} (2.65, -2.5);

      \draw[thick,-Stealth,shorten >=1pt] (4.5, -3)   to [out=0,in=0]  node[below right, yshift=5mm]  {} (4, -1);

      \draw[thick,-Stealth,shorten >=1pt] (-1.75, -3.5)   to [out=-90,in=180]  node[below right, yshift=5mm]  {} (0, -4.75);
      %% \draw[thick,-Stealth,shorten >=1pt] (-0.5, -2)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (1, -3);
      %% \draw[thick,-Stealth,shorten >=1pt] (4.5, -2)   to [out=-90,in=90]  node[right, yshift=-1.5mm]  {} (3, -3);


      \draw[thick,-Stealth,shorten >=1pt] (2, 2)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (2, 1.5);
      \draw[thick,-Stealth,shorten >=1pt] (2, 0.5)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (2, -0.5);
      \draw[thick,-Stealth,shorten >=1pt] (2, -5.5)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (2, -5.9);

    \end{tikzpicture}

  \end{adjustbox}
  %\captionsetup{width=0.95\linewidth}
  \caption{\label{fig:(chap7):simple_loop_break} Flow graph representation of the \texttt{loop} in Listing~\ref{lst:(chap7):simple_loop_break}}
\end{figure}
