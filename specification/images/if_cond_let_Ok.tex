
\begin{figure}[H]
  \centering
  \begin{adjustbox}{max size=0.5\linewidth}

    \begin{tikzpicture}


      \draw[line width=0.03pt] (0.8, 2) rectangle (3.2, 2.6);

      \draw[line width=0.03pt] (-1, 1.3) rectangle (5, 0.2);
      \draw[line width=0.03pt] (-2, -2) rectangle (1, -0.9);
      \draw[line width=0.03pt] (1, -3) rectangle (3, -4);
      \draw[line width=0.03pt] (0.8, -4.5) rectangle (3.2, -5.1);

      \draw[Box] (2, 2.3) -- (2, 2.3) node[anchor=center]{\textit{main entry}};
      \draw[Box] (2, -4.8) -- (2, -4.8) node[anchor=center]{\textit{main exit}};

      \draw[Box] (2, 1) -- (2, 1) node[anchor=center]{YI\_1 = foo ()};
      \draw[Box] (2, 0.5) -- (2, 0.5) node[anchor=center]{YI\_2 = YI\_1.hasValue};

      \draw[Box] (-0.5, -1.25) -- (-0.5, -1.25) node[anchor=center]{x = YI\_1.value};
      \draw[Box] (-0.5, -1.7) -- (-0.5, -1.7) node[anchor=center]{println (...)};

      \draw[Box] (2, -3.5) -- (2, -3.5) node[anchor=center]{return};

      \draw[thick,-Stealth,shorten >=1pt] (1, 0.2)  to [out=-90,in=90]  node[below left, yshift=5mm] {\small YI\_2} (-0.5, -0.9);
      \draw[thick,-Stealth,shorten >=1pt] (2.5, 0.2)   to [out=-90,in=90]  node[below right, yshift=5mm]  {\small !YI\_2} (2.5, -3);

      \draw[thick,-Stealth,shorten >=1pt] (-0.5, -2)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (1.5, -3);

      \draw[thick,-Stealth,shorten >=1pt] (2, 2)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (2, 1.3);
      \draw[thick,-Stealth,shorten >=1pt] (2, -4)   to [out=-90,in=90]  node[left, yshift=-1.5mm]  {} (2, -4.5);

    \end{tikzpicture}

  \end{adjustbox}
  \caption{\label{fig:if_cond_let_Ok} Flow graph representation of the \texttt{if} condition in Listing~\ref{lst:if_cond_let_Ok}}
\end{figure}
