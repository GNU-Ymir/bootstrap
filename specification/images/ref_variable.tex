\begin{center}
\begin{adjustbox}{max size=0.7\linewidth}
  \begin{tikzpicture}
    % ================ Axis ========================
    \draw (0, 0) -- coordinate (LEFT) (0, 0);
    \draw[-Stealth](0, 10) -- coordinate (YAx) (0, 2);
    \draw[-Stealth](5.2, 10) -- coordinate (YAx) (5.2, 2);
    \draw[Box] (2.5, 10.7) -- (2.5, 10.7) node[anchor=center]{\textbf{STACK}};

    \filldraw (0, 6.5) circle (1pt) node[align=center, left] {+0};
    \filldraw (0, 5.5) circle (1pt) node[align=center, left] {+8};
    \filldraw (0, 4.5) circle (1pt) node[align=center, left] {+16};
    \filldraw (0, 3.5) circle (1pt) node[align=center, left] {+24};


    %% % ================ MAIN ========================
    \fill[black!10] (0.2, 10) rectangle (5, 8);
    \draw[Box] (2.5, 7.6) -- (2.5, 7.6) node[anchor=center]{\textbf{.}};
    \draw[Box] (2.5, 7.4) -- (2.5, 7.4) node[anchor=center]{\textbf{.}};
    \draw[Box] (2.5, 7.2) -- (2.5, 7.2) node[anchor=center]{\textbf{.}};

    \draw[line width=1pt] (0.18, 6.9) rectangle (5.02, 3.48);
    \fill[blue!10] (0.2, 6.5) rectangle (5, 3.5);
    \draw[Box] (2.5, 6.7) -- (2.5, 6.7) node[anchor=center]{\emph{main}};

    \draw[Box] (0.5, 5.7) -- (0.5, 5.7) node[anchor=center]{\textbf{\textit{a}}};
    \draw[line width=0.005pt] (0.25, 6.45) rectangle (4.9, 5);

    \draw[Box] (2.5, 6.2) -- (2.5, 6.2) node[anchor=center]{1};
    \draw[Box] (2.5, 5.7) -- (2.5, 5.7) node[anchor=center]{2};
    \draw[Box] (2.5, 5.2) -- (2.5, 5.2) node[anchor=center]{3};
    \draw[Box] (2.5, 4.7) -- (2.5, 4.7) node[anchor=center]{-};

    \draw[line width=0.005pt] (0.25, 4.5) rectangle (4.9, 3.55);
    \draw[Box] (0.5, 4) -- (0.5, 4) node[anchor=center]{\textbf{\textit{b}}};
    \draw[Box] (2.5, 4) -- (2.5, 4) node[anchor=center]{\emph{ref~=}~$main+0$};

    \draw[thick,-Stealth,shorten >=1pt] (5.3, 4) to [out=0,in=0] node[below left, yshift=3mm] {} (5.3, 6.2);

  \end{tikzpicture}
\end{adjustbox}
\end{center}
\vspace{-50pt}%
\captionof{figure}{\label{fig:ref_variable} Example of reference variable}%
\vspace{5pt}
