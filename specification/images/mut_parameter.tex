\begin{figure}[H]
  \begin{adjustbox}{max size=\linewidth}
    \begin{tikzpicture}
      % ================ Axis ========================
      \draw (0, 0) -- coordinate (LEFT) (0, 0);
      \draw[-Stealth](0, 10) -- coordinate (YAx) (0, 0.5);
      \draw[-Stealth](7.2, 10) -- coordinate (YAx) (7.2, 0.5);
      \draw[Box] (3.5, 10.7) -- (3.5, 10.7) node[anchor=center]{\textbf{STACK}};

      \filldraw (0, 6.5) circle (1pt) node[align=center, left] {+0};
      \filldraw (0, 5.5) circle (1pt) node[align=center, left] {+8};
      \filldraw (0, 4.5) circle (1pt) node[align=center, left] {+16};

      \filldraw (-0.2, 4) circle (0pt) node[align=center, left] {...};
      \filldraw (0, 3.5) circle (1pt) node[align=center, left] {+0};
      \filldraw (0, 2.5) circle (1pt) node[align=center, left] {+8};
      \filldraw (0, 1.5) circle (1pt) node[align=center, left] {+16};

      %% % ================ Foo ========================
      \fill[black!10] (0.2, 10) rectangle (7, 8);
      \draw[Box] (3.5, 7.6) -- (3.5, 7.6) node[anchor=center]{\textbf{.}};
      \draw[Box] (3.5, 7.4) -- (3.5, 7.4) node[anchor=center]{\textbf{.}};
      \draw[Box] (3.5, 7.2) -- (3.5, 7.2) node[anchor=center]{\textbf{.}};

      \draw[line width=1pt] (0.18, 6.9) rectangle (7.02, 4.48);
      \fill[blue!10] (0.2, 6.5) rectangle (7, 4.5);
      \draw[Box] (3.5, 6.7) -- (3.5, 6.7) node[anchor=center]{\emph{main}};

      \draw[Box] (0.5, 5.5) -- (0.5, 5.5) node[anchor=center]{\textbf{\textit{a}}};
      \draw[line width=0.005pt] (0.3, 6.4) rectangle (6.8, 4.6);
      \draw[line width=0.005pt] (0.7, 5.5) rectangle (6.8, 5.5);

      \draw[Box] (3.5, 6) -- (3.5, 6) node[anchor=center]{\emph{len~=}~$3$};
      \draw[Box] (3.5, 5) -- (3.5, 5) node[anchor=center]{\emph{ptr~=}~0xfa45b987};


      \draw[line width=1pt] (0.18, 3.9) rectangle (7.02, 1.48);
      \fill[blue!10] (0.2, 3.5) rectangle (7, 1.5);
      \draw[Box] (3.5, 3.7) -- (3.5, 3.7) node[anchor=center]{\emph{foo}};

      \draw[Box] (0.5, 2.5) -- (0.5, 2.5) node[anchor=center]{\textbf{\textit{x}}};
      \draw[line width=0.005pt] (0.3, 3.4) rectangle (6.8, 1.6);
      \draw[line width=0.005pt] (0.7, 2.5) rectangle (6.8, 2.5);

      \draw[Box] (3.5, 3) -- (3.5, 3) node[anchor=center]{\emph{len~=}~$3$};
      \draw[Box] (3.5, 2) -- (3.5, 2) node[anchor=center]{\emph{ptr~=}~0xfa45b987};


      %% % ================ Heap ========================

      \draw[-Stealth](10, 10) -- coordinate (YAx) (10, 0.5);
      \draw[-Stealth](17.2, 10) -- coordinate (YAx) (17.2, 0.5);
      \filldraw (17.2, 7.5) circle (1pt) node[align=center, right] {0xfa45b987};

      % ================ Data ========================
      \draw[Box] (13.5, 10.7) -- (13.5, 10.7) node[anchor=center]{\textbf{HEAP}};
      \fill[black!10] (10.2, 10) rectangle (17, 8);
      \fill[applegreen!20] (10.2, 7.9) rectangle (17, 5);
      \draw[line width=0.005pt] (10.4, 7) rectangle (16.8, 7);
      \draw[line width=0.005pt] (10.4, 6) rectangle (16.8, 6);

      \draw[Box] (13.5, 7.5)  (13.8, 7.5) node[anchor=center]{$1$};
      \draw[Box] (13.5, 6.5)  (13.8, 6.5) node[anchor=center]{$2$};
      \draw[Box] (13.5, 5.5)  (13.8, 5.5) node[anchor=center]{$3$};

      \draw[thick,-Stealth,shorten >=1pt] (7.3, 5) to [out=0,in=175] node[below left, yshift=3mm] {} (9.9, 7.5);

      \draw[thick,-Stealth,shorten >=1pt] (7.3, 2) to [out=0,in=185] node[below left, yshift=3mm] {} (9.9, 7.5);

    \end{tikzpicture}
  \end{adjustbox}
  \caption{\label{fig:example_mut_params} Example of a mutable parameter passed by value}
\end{figure}
%
\vspace{4pt}%
